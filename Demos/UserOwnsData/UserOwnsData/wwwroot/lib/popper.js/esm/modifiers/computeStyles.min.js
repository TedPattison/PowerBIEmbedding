import{top,left,right,bottom}from"../enums.js";import getOffsetParent from"../dom-utils/getOffsetParent.js";import getWindow from"../dom-utils/getWindow.js";import getDocumentElement from"../dom-utils/getDocumentElement.js";import getComputedStyle from"../dom-utils/getComputedStyle.js";import getBasePlacement from"../utils/getBasePlacement.js";var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsets(t){var e=t.x,o=t.y,s=window.devicePixelRatio||1;return{x:Math.round(e*s)/s||0,y:Math.round(o*s)/s||0}}export function mapToStyles(t){var e,o=t.popper,s=t.popperRect,p=t.placement,a=t.offsets,r=t.position,i=t.gpuAcceleration,n=t.adaptive,m=roundOffsets(a),l=m.x,f=m.y,c=a.hasOwnProperty("x"),u=a.hasOwnProperty("y"),d=left,g=top,y=window;if(n){var O=getOffsetParent(o);O===getWindow(o)&&(O=getDocumentElement(o)),p===top&&(g=bottom,f-=O.clientHeight-s.height,f*=i?1:-1),p===left&&(d=right,l-=O.clientWidth-s.width,l*=i?1:-1)}var b,j=Object.assign({position:r},n&&unsetSides);return i?Object.assign({},j,((b={})[g]=u?"0":"",b[d]=c?"0":"",b.transform=(y.devicePixelRatio||1)<2?"translate("+l+"px, "+f+"px)":"translate3d("+l+"px, "+f+"px, 0)",b)):Object.assign({},j,((e={})[g]=u?f+"px":"",e[d]=c?l+"px":"",e.transform="",e))};function computeStyles(t){var e=t.state,o=t.options,s=o.gpuAcceleration,p=void 0===s||s,a=o.adaptive,r=void 0===a||a,i={placement:getBasePlacement(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:p};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,{},mapToStyles(Object.assign({},i,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,{},mapToStyles(Object.assign({},i,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}export default{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};